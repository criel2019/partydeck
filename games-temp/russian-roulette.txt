================================================================================
ëŸ¬ì‹œì•ˆ ë£°ë › ê²Œì„ êµ¬í˜„ ì½”ë“œ
================================================================================

ì•„ë˜ ì½”ë“œë¥¼ index.htmlì˜ í•´ë‹¹ ì„¹ì…˜ì— ì‚½ì…í•˜ì„¸ìš”.

================================================================================
ì„¹ì…˜ 1: HTML - POKER ê²Œì„ ìŠ¤í¬ë¦° ë’¤ì— ì¶”ê°€ (ë¼ì¸ 614 ì´í›„)
================================================================================

<!-- RUSSIAN ROULETTE -->
<div class="screen" id="rouletteGame">
  <div class="roulette-header">
    <button class="back-btn" style="font-size:18px;padding:4px;" onclick="leaveGame()">âœ•</button>
    <div class="roulette-title">ğŸ”« ëŸ¬ì‹œì•ˆ ë£°ë ›</div>
    <div class="roulette-survivors">
      <span id="rouletteSurvivors">6</span>/<span id="rouletteTotalPlayers">6</span>
    </div>
  </div>

  <!-- ê²Œì„ ì‹œì‘ ì „ ì„¤ì • (í˜¸ìŠ¤íŠ¸ë§Œ) -->
  <div class="roulette-setup" id="rouletteSetup" style="display:none;">
    <div class="setup-card">
      <div class="setup-label">ì´ì•Œ ê°œìˆ˜</div>
      <div class="setup-slider-row">
        <input type="range" class="setup-slider" id="bulletsSlider" min="1" max="3" value="1">
        <div class="setup-value" id="bulletsValue">1</div>
      </div>
    </div>
    <div class="setup-card">
      <div class="setup-label">ì‹¤ë¦°ë” ì¹¸ ìˆ˜</div>
      <div class="setup-slider-row">
        <input type="range" class="setup-slider" id="chambersSlider" min="6" max="8" value="6">
        <div class="setup-value" id="chambersValue">6</div>
      </div>
    </div>
    <button class="btn btn-primary" onclick="confirmRouletteSetup()" style="margin-top:12px;">ì„¤ì • ì™„ë£Œ ë° ì‹œì‘</button>
  </div>

  <!-- ì‹¤ë¦°ë” ì‹œê°í™” -->
  <div class="cylinder-area">
    <div class="current-turn-display" id="currentTurnDisplay">
      <span id="currentTurnName">í”Œë ˆì´ì–´</span>ì˜ ì°¨ë¡€
    </div>

    <div class="cylinder-container">
      <div class="cylinder" id="cylinder">
        <!-- ë™ì  ìƒì„±: 6~8ê°œ ì¹¸ -->
      </div>
      <div class="cylinder-center">ğŸ¯</div>
    </div>

    <div class="cylinder-info" id="cylinderInfo">
      ì‹¤ë¦°ë”ë¥¼ ëŒë ¤ì£¼ì„¸ìš”
    </div>
  </div>

  <!-- ìƒì¡´ì ë¦¬ìŠ¤íŠ¸ -->
  <div class="survivors-list" id="survivorsList">
    <!-- ë™ì  ìƒì„± -->
  </div>

  <!-- ì•¡ì…˜ ë²„íŠ¼ -->
  <div class="roulette-actions" id="rouletteActions">
    <button class="btn btn-secondary" id="spinBtn" onclick="spinCylinder()" style="display:none;">
      ğŸ”„ ì‹¤ë¦°ë” ëŒë¦¬ê¸°
    </button>
    <button class="btn btn-danger" id="triggerBtn" onclick="pullTrigger()" style="display:none;">
      ğŸ’¥ ë°©ì•„ì‡  ë‹¹ê¸°ê¸°
    </button>
    <button class="btn btn-primary" id="restartBtn" onclick="restartRoulette()" style="display:none;">
      ğŸ” ë‹¤ì‹œ í•˜ê¸°
    </button>
  </div>
</div>

<!-- ê²°ê³¼ í”Œë˜ì‹œ ì˜¤ë²„ë ˆì´ -->
<div class="roulette-flash" id="rouletteFlash">
  <div class="flash-content" id="flashContent">
    <div class="flash-icon" id="flashIcon">ğŸ’¥</div>
    <div class="flash-text" id="flashText">íƒ•!</div>
  </div>
</div>


================================================================================
ì„¹ì…˜ 2: CSS - MAFIA CSS ë’¤ì— ì¶”ê°€ (ë¼ì¸ 467 ì´ì „, </style> ì „)
================================================================================

/* ===== RUSSIAN ROULETTE CSS ===== */
#rouletteGame { padding: 12px; gap: 10px; }

.roulette-header {
  display: flex; justify-content: space-between; align-items: center;
  padding: 10px 12px; background: var(--bg-card); border-radius: var(--radius-sm);
}

.roulette-title {
  font-family: 'Black Han Sans', sans-serif;
  font-size: 20px; letter-spacing: 0.5px;
}

.roulette-survivors {
  font-family: 'Black Han Sans', sans-serif;
  font-size: 16px; color: var(--success);
}

/* ì„¤ì • íŒ¨ë„ */
.roulette-setup {
  padding: 16px; background: var(--bg-card);
  border-radius: var(--radius); border: 1px solid rgba(255,255,255,0.06);
}

.setup-card {
  background: var(--bg-surface); padding: 14px;
  border-radius: var(--radius-sm); margin-bottom: 10px;
}

.setup-label {
  font-size: 14px; font-weight: 700; margin-bottom: 8px;
  color: var(--text-dim);
}

.setup-slider-row {
  display: flex; align-items: center; gap: 12px;
}

.setup-slider {
  flex: 1; -webkit-appearance: none; height: 6px;
  border-radius: 3px; background: var(--bg-dark); outline: none;
}

.setup-slider::-webkit-slider-thumb {
  -webkit-appearance: none; width: 24px; height: 24px;
  border-radius: 50%; background: var(--accent2); cursor: pointer;
  box-shadow: 0 2px 8px rgba(0,229,255,0.4);
}

.setup-value {
  font-family: 'Black Han Sans', sans-serif;
  font-size: 20px; color: var(--accent2); min-width: 30px;
  text-align: center;
}

/* ì‹¤ë¦°ë” ì˜ì—­ */
.cylinder-area {
  flex: 1; display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  padding: 16px; gap: 16px;
}

.current-turn-display {
  font-size: 16px; font-weight: 700;
  color: var(--text); text-align: center;
  padding: 8px 16px; background: var(--bg-surface);
  border-radius: var(--radius-sm);
}

#currentTurnName {
  color: var(--accent2); font-family: 'Black Han Sans', sans-serif;
}

.cylinder-container {
  position: relative; width: 200px; height: 200px;
}

.cylinder {
  width: 100%; height: 100%; border-radius: 50%;
  position: relative;
  background:
    conic-gradient(from 0deg,
      #2a2a3e 0deg 60deg, #1a1a2e 60deg 120deg,
      #2a2a3e 120deg 180deg, #1a1a2e 180deg 240deg,
      #2a2a3e 240deg 300deg, #1a1a2e 300deg 360deg);
  box-shadow:
    inset 0 0 30px rgba(0,0,0,0.5),
    0 4px 20px rgba(0,0,0,0.3);
  border: 4px solid #3a3a4e;
  transition: transform 3s cubic-bezier(0.25, 0.1, 0.25, 1);
}

.cylinder.spinning {
  animation: spin-cylinder 3s cubic-bezier(0.25, 0.1, 0.25, 1);
}

@keyframes spin-cylinder {
  from { transform: rotate(0deg); }
  to { transform: rotate(1440deg); }
}

.cylinder-center {
  position: absolute; top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  width: 50px; height: 50px; border-radius: 50%;
  background: linear-gradient(135deg, #3a3a4e, #2a2a3e);
  display: flex; align-items: center; justify-content: center;
  font-size: 24px;
  box-shadow: 0 2px 12px rgba(0,0,0,0.5);
  pointer-events: none;
}

.chamber-indicator {
  position: absolute;
  width: 20px; height: 20px;
  border-radius: 50%;
  background: rgba(120,120,140,0.5);
  border: 2px solid rgba(255,255,255,0.2);
  transform-origin: center;
}

.chamber-indicator.bullet {
  background: radial-gradient(circle, #ff1744, #c41c1c);
  border-color: #ff4444;
  box-shadow: 0 0 10px rgba(255,23,68,0.6);
}

.chamber-indicator.empty {
  background: rgba(120,120,140,0.3);
}

.cylinder-info {
  font-size: 13px; color: var(--text-dim);
  text-align: center; min-height: 18px;
}

/* ìƒì¡´ì ë¦¬ìŠ¤íŠ¸ */
.survivors-list {
  display: grid; grid-template-columns: repeat(3, 1fr);
  gap: 8px; padding: 0 4px; max-height: 120px;
  overflow-y: auto;
}

.survivor-item {
  display: flex; flex-direction: column;
  align-items: center; gap: 4px;
  padding: 8px 4px; background: var(--bg-card);
  border-radius: var(--radius-sm); position: relative;
  transition: all 0.3s;
}

.survivor-item.dead {
  opacity: 0.4; filter: grayscale(1);
}

.survivor-item.dead::after {
  content: 'ğŸ’€';
  position: absolute; top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  font-size: 32px; pointer-events: none;
}

.survivor-avatar-sm {
  width: 36px; height: 36px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 18px;
}

.survivor-name {
  font-size: 11px; font-weight: 700;
  max-width: 60px; overflow: hidden;
  text-overflow: ellipsis; white-space: nowrap;
  text-align: center;
}

/* ì•¡ì…˜ ë²„íŠ¼ */
.roulette-actions {
  display: flex; flex-direction: column; gap: 8px;
  padding: 0 4px;
}

.btn-danger {
  background: linear-gradient(135deg, var(--danger), #c41c1c);
  color: white;
  box-shadow: 0 4px 20px rgba(255,23,68,0.4);
  font-size: 20px; padding: 18px;
  position: relative; overflow: hidden;
}

.btn-danger::before {
  content: '';
  position: absolute; top: 50%; left: 50%;
  width: 0; height: 0; border-radius: 50%;
  background: rgba(255,255,255,0.3);
  transform: translate(-50%, -50%);
  transition: width 0.6s, height 0.6s;
}

.btn-danger:active::before {
  width: 300px; height: 300px;
}

/* ê²°ê³¼ í”Œë˜ì‹œ */
.roulette-flash {
  display: none; position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  z-index: 150; align-items: center; justify-content: center;
  pointer-events: none;
}

.roulette-flash.active { display: flex; }

.roulette-flash.bang {
  background: radial-gradient(circle, rgba(255,23,68,0.8), rgba(255,23,68,0) 70%);
  animation: flash-bang 0.8s ease-out;
}

.roulette-flash.safe {
  background: radial-gradient(circle, rgba(0,230,118,0.6), rgba(0,230,118,0) 70%);
  animation: flash-safe 0.8s ease-out;
}

@keyframes flash-bang {
  0% { opacity: 0; }
  20% { opacity: 1; }
  100% { opacity: 0; }
}

@keyframes flash-safe {
  0% { opacity: 0; }
  30% { opacity: 1; }
  100% { opacity: 0; }
}

.flash-content {
  display: flex; flex-direction: column;
  align-items: center; gap: 12px;
  animation: flash-zoom 0.8s ease-out;
}

@keyframes flash-zoom {
  0% { transform: scale(0.5); opacity: 0; }
  40% { transform: scale(1.3); opacity: 1; }
  100% { transform: scale(1); opacity: 0; }
}

.flash-icon {
  font-size: 120px; line-height: 1;
}

.flash-text {
  font-family: 'Black Han Sans', sans-serif;
  font-size: 48px; color: white;
  text-shadow: 0 4px 20px rgba(0,0,0,0.5);
}


================================================================================
ì„¹ì…˜ 3: JavaScript - ê²Œì„ ì—”ì§„ ì½”ë“œ
ë¼ì¸ 1740 (ê²Œì„ ìŠ¤í…ë“¤) ìœ„ì¹˜ì—ì„œ startRussianRoulette í•¨ìˆ˜ë¥¼ êµì²´í•˜ê³ ,
ë¼ì¸ 1069 (handleGameStart) ë‚´ë¶€ì˜ 'roulette' ì¼€ì´ìŠ¤ë„ ìˆ˜ì •
================================================================================

// ===== RUSSIAN ROULETTE ENGINE =====
let rrState = {
  bullets: 1,
  chambers: 6,
  cylinder: [], // [false, false, true, false, false, false] - true=ì´ì•Œ
  currentChamber: 0,
  turnIdx: 0,
  players: [], // {id, name, avatar, alive}
  phase: 'setup', // setup, playing, spinning, triggered, gameover
  setupDone: false,
  lastResult: null,
};

function startRussianRoulette() {
  if(!state.isHost) return;

  rrState = {
    bullets: 1,
    chambers: 6,
    cylinder: [],
    currentChamber: 0,
    turnIdx: 0,
    players: state.players.map(p => ({
      id: p.id, name: p.name, avatar: p.avatar, alive: true
    })),
    phase: 'setup',
    setupDone: false,
    lastResult: null,
  };

  showScreen('rouletteGame');
  document.getElementById('rouletteSetup').style.display = 'block';

  // ìŠ¬ë¼ì´ë” ì´ë²¤íŠ¸
  document.getElementById('bulletsSlider').oninput = (e) => {
    document.getElementById('bulletsValue').textContent = e.target.value;
  };
  document.getElementById('chambersSlider').oninput = (e) => {
    document.getElementById('chambersValue').textContent = e.target.value;
  };
}

function confirmRouletteSetup() {
  const bullets = parseInt(document.getElementById('bulletsSlider').value);
  const chambers = parseInt(document.getElementById('chambersSlider').value);

  rrState.bullets = bullets;
  rrState.chambers = chambers;
  rrState.cylinder = new Array(chambers).fill(false);

  // ëœë¤í•˜ê²Œ ì´ì•Œ ë°°ì¹˜ (í˜¸ìŠ¤íŠ¸ë§Œ ì•Œê³  ìˆìŒ)
  const positions = [];
  while(positions.length < bullets) {
    const pos = Math.floor(Math.random() * chambers);
    if(!positions.includes(pos)) positions.push(pos);
  }
  positions.forEach(p => rrState.cylinder[p] = true);

  rrState.currentChamber = Math.floor(Math.random() * chambers);
  rrState.phase = 'playing';
  rrState.setupDone = true;
  rrState.turnIdx = 0;

  document.getElementById('rouletteSetup').style.display = 'none';

  broadcastRRState();
  renderRouletteView();
}

function broadcastRRState() {
  const rs = rrState;

  rs.players.forEach(p => {
    const view = {
      type: 'roulette-state',
      players: rs.players.map(pp => ({
        id: pp.id, name: pp.name, avatar: pp.avatar, alive: pp.alive
      })),
      turnIdx: rs.turnIdx,
      phase: rs.phase,
      chambers: rs.chambers,
      bullets: rs.bullets,
      lastResult: rs.lastResult,
      // ì‹¤ë¦°ë” ë‚´ìš©ì€ í˜¸ìŠ¤íŠ¸ë§Œ ì•Œê³  ìˆìŒ (ë³´ì•ˆ)
      showCylinder: false,
    };

    if(p.id === state.myId) renderRouletteView(view);
    else sendTo(p.id, view);
  });
}

function renderRouletteView(data) {
  const rs = data || {
    players: rrState.players,
    turnIdx: rrState.turnIdx,
    phase: rrState.phase,
    chambers: rrState.chambers,
    bullets: rrState.bullets,
    lastResult: rrState.lastResult,
  };

  // ìƒë‹¨ ìƒì¡´ì ìˆ˜
  const alive = rs.players.filter(p => p.alive).length;
  document.getElementById('rouletteSurvivors').textContent = alive;
  document.getElementById('rouletteTotalPlayers').textContent = rs.players.length;

  // í˜„ì¬ ì°¨ë¡€
  const currentPlayer = rs.players[rs.turnIdx];
  if(currentPlayer) {
    document.getElementById('currentTurnName').textContent = currentPlayer.name;
  }

  // ì‹¤ë¦°ë” ë Œë”ë§ (ì¹¸ë§Œ í‘œì‹œ, ì´ì•Œì€ ê²Œì„ ì¤‘ì—” ìˆ¨ê¹€)
  const cylinder = document.getElementById('cylinder');
  cylinder.innerHTML = '';
  const angleStep = 360 / rs.chambers;

  for(let i = 0; i < rs.chambers; i++) {
    const indicator = document.createElement('div');
    indicator.className = 'chamber-indicator empty';
    const angle = i * angleStep;
    const radius = 80; // ì¤‘ì‹¬ìœ¼ë¡œë¶€í„° ê±°ë¦¬
    const x = 100 + radius * Math.cos((angle - 90) * Math.PI / 180);
    const y = 100 + radius * Math.sin((angle - 90) * Math.PI / 180);
    indicator.style.left = x + 'px';
    indicator.style.top = y + 'px';
    cylinder.appendChild(indicator);
  }

  // ìƒì¡´ì ë¦¬ìŠ¤íŠ¸
  const survivorsList = document.getElementById('survivorsList');
  survivorsList.innerHTML = rs.players.map((p, i) => `
    <div class="survivor-item ${!p.alive ? 'dead' : ''}">
      <div class="survivor-avatar-sm" style="background:${PLAYER_COLORS[i % PLAYER_COLORS.length]};">${p.avatar}</div>
      <div class="survivor-name">${p.name}</div>
    </div>
  `).join('');

  // ë²„íŠ¼ ìƒíƒœ
  const isMyTurn = currentPlayer?.id === state.myId;
  const spinBtn = document.getElementById('spinBtn');
  const triggerBtn = document.getElementById('triggerBtn');
  const restartBtn = document.getElementById('restartBtn');
  const cylinderInfo = document.getElementById('cylinderInfo');

  spinBtn.style.display = 'none';
  triggerBtn.style.display = 'none';
  restartBtn.style.display = 'none';

  if(rs.phase === 'gameover') {
    cylinderInfo.textContent = 'ê²Œì„ ì¢…ë£Œ!';
    if(state.isHost) {
      restartBtn.style.display = 'block';
    }
  } else if(isMyTurn && rs.phase === 'playing') {
    spinBtn.style.display = 'block';
    cylinderInfo.textContent = 'ì‹¤ë¦°ë”ë¥¼ ëŒë ¤ì£¼ì„¸ìš”';
  } else if(isMyTurn && rs.phase === 'spinning') {
    triggerBtn.style.display = 'block';
    cylinderInfo.textContent = 'ë°©ì•„ì‡ ë¥¼ ë‹¹ê¸°ì„¸ìš”...';
  } else {
    cylinderInfo.textContent = currentPlayer ? `${currentPlayer.name}ì˜ ì°¨ë¡€` : 'ëŒ€ê¸° ì¤‘...';
  }
}

function spinCylinder() {
  if(!state.isHost) {
    // ê²ŒìŠ¤íŠ¸ëŠ” í˜¸ìŠ¤íŠ¸ì—ê²Œ ì•¡ì…˜ ì „ì†¡
    const host = Object.values(state.connections)[0];
    if(host?.open) host.send(JSON.stringify({ type: 'rr-action', action: 'spin' }));
    return;
  }

  // í˜¸ìŠ¤íŠ¸ ì²˜ë¦¬
  rrState.phase = 'spinning';

  // ì‹¤ë¦°ë” íšŒì „ ì• ë‹ˆë©”ì´ì…˜
  const cylinder = document.getElementById('cylinder');
  cylinder.classList.add('spinning');

  setTimeout(() => {
    cylinder.classList.remove('spinning');
    broadcastRRState();
  }, 3000);

  broadcastRRState();
}

function pullTrigger() {
  if(!state.isHost) {
    // ê²ŒìŠ¤íŠ¸ëŠ” í˜¸ìŠ¤íŠ¸ì—ê²Œ ì•¡ì…˜ ì „ì†¡
    const host = Object.values(state.connections)[0];
    if(host?.open) host.send(JSON.stringify({ type: 'rr-action', action: 'trigger' }));
    return;
  }

  // í˜¸ìŠ¤íŠ¸ ì²˜ë¦¬
  const currentPlayer = rrState.players[rrState.turnIdx];
  const isBullet = rrState.cylinder[rrState.currentChamber];

  if(isBullet) {
    // íƒ•! ì‚¬ë§
    currentPlayer.alive = false;
    rrState.lastResult = { playerId: currentPlayer.id, result: 'dead' };

    // ì§„ë™
    if(navigator.vibrate) navigator.vibrate([200, 100, 200]);

    // í”Œë˜ì‹œ íš¨ê³¼
    showRouletteFlash('bang', 'ğŸ’¥', 'íƒ•!');

    setTimeout(() => {
      // ë‹¤ìŒ ìƒì¡´ìë¡œ
      rrState.currentChamber = (rrState.currentChamber + 1) % rrState.chambers;
      advanceRouletteTurn();
    }, 2000);

  } else {
    // ì°°ì¹µ... ìƒì¡´
    rrState.lastResult = { playerId: currentPlayer.id, result: 'safe' };

    // í”Œë˜ì‹œ íš¨ê³¼
    showRouletteFlash('safe', 'ğŸ˜®â€ğŸ’¨', 'ì°°ì¹µ... ì‚´ì•˜ë‹¤!');

    setTimeout(() => {
      rrState.currentChamber = (rrState.currentChamber + 1) % rrState.chambers;
      advanceRouletteTurn();
    }, 2000);
  }

  broadcastRRState();
}

function showRouletteFlash(type, icon, text) {
  const flash = document.getElementById('rouletteFlash');
  const flashIcon = document.getElementById('flashIcon');
  const flashText = document.getElementById('flashText');

  flash.className = 'roulette-flash active ' + type;
  flashIcon.textContent = icon;
  flashText.textContent = text;

  setTimeout(() => {
    flash.classList.remove('active', type);
  }, 800);
}

function advanceRouletteTurn() {
  const alivePlayers = rrState.players.filter(p => p.alive);

  if(alivePlayers.length === 1) {
    // ìŠ¹ì!
    rrState.phase = 'gameover';
    const winner = alivePlayers[0];

    const result = {
      type: 'rr-result',
      winnerId: winner.id,
      winnerName: winner.name,
      winnerAvatar: winner.avatar,
    };

    broadcast(result);
    handleRRResult(result);
    return;
  }

  if(alivePlayers.length === 0) {
    // ì´ë¡ ì ìœ¼ë¡œ ë¶ˆê°€ëŠ¥í•˜ì§€ë§Œ ì•ˆì „ì¥ì¹˜
    rrState.phase = 'gameover';
    broadcastRRState();
    return;
  }

  // ë‹¤ìŒ ìƒì¡´ì ì°¾ê¸°
  let nextIdx = (rrState.turnIdx + 1) % rrState.players.length;
  while(!rrState.players[nextIdx].alive) {
    nextIdx = (nextIdx + 1) % rrState.players.length;
  }

  rrState.turnIdx = nextIdx;
  rrState.phase = 'playing';
  broadcastRRState();
}

function handleRRResult(msg) {
  const won = msg.winnerId === state.myId;
  recordGame(won);

  document.getElementById('resultTitle').textContent = won ? 'ğŸ† ìƒì¡´!' : 'ğŸ’€ íƒˆë½...';
  document.getElementById('resultTitle').style.color = won ? 'var(--success)' : 'var(--danger)';
  document.getElementById('winnerName').textContent = msg.winnerName + ' ' + msg.winnerAvatar + ' ìŠ¹ë¦¬!';
  document.getElementById('resultHand').textContent = 'ëŸ¬ì‹œì•ˆ ë£°ë › ìµœí›„ì˜ ìƒì¡´ì';
  document.getElementById('resultPot').textContent = '';
  document.getElementById('resultCards').innerHTML = '';
  document.getElementById('resultOverlay').classList.add('active');
}

function restartRoulette() {
  if(!state.isHost) return;
  startRussianRoulette();
}

// P2P ë©”ì‹œì§€ í•¸ë“¤ëŸ¬ ì¶”ê°€
// handleMessage í•¨ìˆ˜ ë‚´ë¶€ì˜ handlers ê°ì²´ì— ì¶”ê°€:
// 'roulette-state': () => { showScreen('rouletteGame'); renderRouletteView(msg); },
// 'rr-action': () => { if(state.isHost) processRRAction(peerId, msg.action); },
// 'rr-result': () => handleRRResult(msg),

function processRRAction(peerId, action) {
  const currentPlayer = rrState.players[rrState.turnIdx];
  if(!currentPlayer || currentPlayer.id !== peerId) return;

  if(action === 'spin') {
    spinCylinder();
  } else if(action === 'trigger') {
    pullTrigger();
  }
}


================================================================================
í†µí•© ê°€ì´ë“œ
================================================================================

1. HTML ì„¹ì…˜ì„ index.htmlì˜ ë¼ì¸ 614 ì´í›„ (</div> ë‹¤ìŒ, MAFIA ìŠ¤í¬ë¦° ì „)ì— ì¶”ê°€

2. CSS ì„¹ì…˜ì„ index.htmlì˜ ë¼ì¸ 467 ì´ì „ (</style> ì „)ì— ì¶”ê°€

3. JavaScript ì„¹ì…˜:
   - ë¼ì¸ 1734ì˜ startRussianRoulette() í•¨ìˆ˜ë¥¼ ìœ„ ì½”ë“œë¡œ êµì²´
   - ë¼ì¸ 1062ì˜ handleGameStart ë‚´ë¶€ì—ì„œ:
     else if(msg.game === 'roulette') { showScreen('rouletteGame'); renderRouletteView(msg.state); }

   - ë¼ì¸ 869ì˜ handleMessage í•¨ìˆ˜ ë‚´ handlers ê°ì²´ì— ì¶”ê°€:
     'roulette-state': () => { showScreen('rouletteGame'); renderRouletteView(msg); },
     'rr-action': () => { if(state.isHost) processRRAction(peerId, msg.action); },
     'rr-result': () => handleRRResult(msg),

4. ì „ì²´ ëŸ¬ì‹œì•ˆ ë£°ë › ì—”ì§„ ì½”ë“œ (ë¼ì¸ 1730 ê·¼ì²˜ì— ì¶”ê°€)ë¥¼ ìœ„ JavaScript ì„¹ì…˜ ì „ì²´ë¡œ êµì²´


================================================================================
ê²Œì„ í”Œë ˆì´ íë¦„
================================================================================

1. í˜¸ìŠ¤íŠ¸ê°€ ëŒ€ê¸°ì‹¤ì—ì„œ "ë£°ë ›" ì„ íƒ í›„ ê²Œì„ ì‹œì‘
2. ì„¤ì • í™”ë©´ì—ì„œ ì´ì•Œ ìˆ˜(1~3), ì‹¤ë¦°ë” ì¹¸ ìˆ˜(6~8) ì„ íƒ
3. ì„¤ì • ì™„ë£Œ ì‹œ ê²Œì„ ì‹œì‘, ì‹¤ë¦°ë”ì— ì´ì•Œ ëœë¤ ë°°ì¹˜ (í˜¸ìŠ¤íŠ¸ë§Œ ì•Œê³  ìˆìŒ)
4. ìˆœì„œëŒ€ë¡œ:
   - "ì‹¤ë¦°ë” ëŒë¦¬ê¸°" ë²„íŠ¼ â†’ 3ì´ˆ íšŒì „ ì• ë‹ˆë©”ì´ì…˜
   - "ë°©ì•„ì‡  ë‹¹ê¸°ê¸°" ë²„íŠ¼ â†’ ê²°ê³¼ íŒì •
   - ì´ì•Œì´ë©´: ë¹¨ê°„ í”Œë˜ì‹œ + "íƒ•!" + ì§„ë™ â†’ íƒˆë½
   - ë¹ˆì¹¸ì´ë©´: ì´ˆë¡ í”Œë˜ì‹œ + "ì°°ì¹µ... ì‚´ì•˜ë‹¤!" â†’ ë‹¤ìŒ ì°¨ë¡€
5. ë§ˆì§€ë§‰ 1ëª… ìƒì¡´ ì‹œ ìŠ¹ë¦¬
6. í˜¸ìŠ¤íŠ¸ëŠ” "ë‹¤ì‹œ í•˜ê¸°"ë¡œ ì¬ì‹œì‘ ê°€ëŠ¥


================================================================================
ì£¼ìš” íŠ¹ì§•
================================================================================

- P2P ë™ê¸°í™”: í˜¸ìŠ¤íŠ¸ê°€ ì‹¤ë¦°ë” ìƒíƒœ ê´€ë¦¬, ê²ŒìŠ¤íŠ¸ëŠ” ì•¡ì…˜ë§Œ ì „ì†¡
- ì‹¤ë¦°ë” ì‹œê°í™”: CSSë¡œ ì›í˜• ì‹¤ë¦°ë” êµ¬í˜„, íšŒì „ ì• ë‹ˆë©”ì´ì…˜
- ê¸´ì¥ê° ì—°ì¶œ: í° ë¹¨ê°„ ë°©ì•„ì‡  ë²„íŠ¼, í”Œë˜ì‹œ íš¨ê³¼, ì§„ë™
- ìƒì¡´ì í‘œì‹œ: ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ, íƒˆë½ìëŠ” ğŸ’€ í‘œì‹œ
- ë³´ì•ˆ: ì´ì•Œ ìœ„ì¹˜ëŠ” í˜¸ìŠ¤íŠ¸ë§Œ ì•Œê³  ìˆìŒ, ê²Œì„ ì¤‘ì—” ìˆ¨ê¹€
